(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{58:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(59),n=a(56),c=a.n(n),o=a(57),s=a(60),i=a.n(s),u="c07e91d5d5c572c0bf5dabe0ae7a4fc6",h="https://api.themoviedb.org/3",p={CREDITS:"credits",REVIEWS:"reviews"},l={getTrendingApi:function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat(h,"/trending/movie/week?api_key=").concat(u));case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSearchInputApi:function(e){return i.a.get("".concat(h,"/search/movie?api_key=").concat(u,"&query=").concat(e,"&language=en-US&page=1&include_adult=false")).then((function(e){return e.data.results}))},getMovieDetailsApi:function(){var e=Object(o.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat(h,"/movie/").concat(t,"?api_key=").concat(u));case 2:return a=e.sent,e.abrupt("return",Object(r.a)({},a.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCastReviewApi:function(){var e=Object(o.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat(h,"/movie/").concat(t,"/").concat(a,"?api_key=").concat(u));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};t.b=l},89:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__FWNRa",SearchForm:"Searchbar_SearchForm__1h9lw",SearchFormButton:"Searchbar_SearchFormButton__2KO0A",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__88C7g",SearchFormInput:"Searchbar_SearchFormInput__RvG8d"}},90:function(e,t,a){e.exports={list:"MoviesPage_list__3Prxv",item:"MoviesPage_item__kckBf",img:"MoviesPage_img__3eIBH",moviePageLink:"MoviesPage_moviePageLink__1caEh"}},96:function(e,t,a){"use strict";a.r(t);var r=a(56),n=a.n(r),c=a(57),o=a(15),s=a(16),i=a(18),u=a(17),h=a(0),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e);return Object.fromEntries(t.entries())},l=a(89),m=a.n(l),d=a(4),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={search:""},e.handleChange=function(t){e.setState({search:t.target.value}),console.log(t.target.value)},e.handleSubmit=function(t){t.preventDefault(),e.props.searchProducts(e.state.search),e.setState({serch:""})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.search;return Object(d.jsx)("header",{className:m.a.Searchbar,children:Object(d.jsxs)("form",{className:m.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(d.jsx)("button",{type:"submit",className:m.a.SearchFormButton,children:Object(d.jsx)("span",{className:m.a.SearchFormButtonLabel,children:"Search"})}),Object(d.jsx)("input",{className:m.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange,value:e,name:"search"})]})})}}]),a}(h.Component),f=a(10),v=a(90),g=a.n(v),S=a(58),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={data:[],query:""},e.handleSearch=Object(c.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.location,r=p(a.search).query,S.b.getSearchInputApi(r).then((function(t){return e.setState({data:t,query:r})}));case 3:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){e.setState({query:t.target.value})},e.handleSubmit=function(t){var a=e.props,r=a.history,n=a.location,c=p(n.search).query;t&&t!==c&&r.push("/movies?query=".concat(t))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){p(this.props.location.search).query&&this.handleSearch()}},{key:"componentDidUpdate",value:function(e,t){p(e.location.search).query!==p(this.props.location.search).query&&this.handleSearch()}},{key:"render",value:function(){var e=this,t=this.state.data;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b,{searchProducts:this.handleSubmit}),Object(d.jsx)("ul",{className:g.a.list,children:t.map((function(t){return Object(d.jsx)("li",{className:g.a.item,children:Object(d.jsxs)(f.b,{className:g.a.moviePageLink,to:{pathname:"/movies/".concat(t.id),state:{from:e.props.location.pathname,query:e.state.query}},children:[Object(d.jsx)("img",{className:g.a.img,src:t.poster_path?"https://image.tmdb.org/t/p/w300".concat(t.poster_path):"https://cdn.pixabay.com/photo/2016/12/14/23/08/page-not-found-1907792_960_720.jpg",alt:""}),Object(d.jsx)("p",{children:t.original_title||t.title})]})},t.id)}))})]})}}]),a}(h.Component);t.default=j}}]);
//# sourceMappingURL=4.abc9243d.chunk.js.map